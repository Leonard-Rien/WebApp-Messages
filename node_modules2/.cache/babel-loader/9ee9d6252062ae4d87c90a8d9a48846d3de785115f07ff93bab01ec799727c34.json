{"ast":null,"code":"var _jsxFileName = \"/home/thynva607/superchat/src/components/chat.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { addDoc, collection, serverTimestamp, onSnapshot, query, where, orderBy } from 'firebase/firestore';\nimport { auth, db } from \"../firebase-config\";\nimport './styles/chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Chat = props => {\n  _s();\n  const {\n    room\n  } = props;\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const messagesRef = collection(db, \"messages\");\n  useEffect(() => {\n    const queryMessages = query(messagesRef, where(\"room\", \"==\", room), orderBy(\"createdAt\"));\n    const unsubscribe = onSnapshot(queryMessages, snapshot => {\n      let messages = [];\n      snapshot.forEach(doc => {\n        messages.push({\n          ...doc.data(),\n          id: doc.id\n        });\n      });\n      setMessages(messages);\n    });\n    return () => unsubscribe();\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (newMessage === \"\") return;\n    await addDoc(messagesRef, {\n      text: newMessage,\n      createdAt: serverTimestamp(),\n      utilisateur: auth.currentUser ? auth.currentUser.displayName : \"Utilisateur inconnu\",\n      photo: auth.currentUser.photoURL,\n      email: auth.currentUser.email,\n      room\n    });\n    setNewMessage(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-app\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Bienvenue dans le salon \", room.toUpperCase()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages\",\n      children: messages.map(message => message.email === auth.currentUser.email ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-soi\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-texte\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-contenu\",\n            children: message.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 15\n        }, this)\n      }, message.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-autre\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"photo-utilisateur\",\n          src: message.photo,\n          alt: \"Photo utilisateur\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-texte\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nom-utilisateur\",\n            children: message.utilisateur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-contenu\",\n            children: message.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"new-message-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"new-message-input\",\n        placeholder: \"\\xC9crire un message ici...\",\n        onChange: e => setNewMessage(e.target.value),\n        value: newMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-button\",\n        children: \"Envoyer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"OV+16h7UjorRDnkI4KM12MI4DJA=\");\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useEffect","useState","addDoc","collection","serverTimestamp","onSnapshot","query","where","orderBy","auth","db","jsxDEV","_jsxDEV","Chat","props","_s","room","newMessage","setNewMessage","messages","setMessages","messagesRef","queryMessages","unsubscribe","snapshot","forEach","doc","push","data","id","handleSubmit","e","preventDefault","text","createdAt","utilisateur","currentUser","displayName","photo","photoURL","email","className","children","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","map","message","src","alt","onSubmit","placeholder","onChange","target","value","type","_c","$RefreshReg$"],"sources":["/home/thynva607/superchat/src/components/chat.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { addDoc, \n         collection, \n         serverTimestamp, \n         onSnapshot, \n         query,\n         where,\n         orderBy} from 'firebase/firestore';\nimport { auth, db } from \"../firebase-config\";\nimport './styles/chat.css'\n\nexport const Chat = (props) => {\n    const {room} = props;\n  const [newMessage, setNewMessage] = useState(\"\");\nconst [messages, setMessages] = useState([])\n  const messagesRef = collection(db, \"messages\");\n\n\n   useEffect(() => {\n      const queryMessages = query(\n      messagesRef, \n      where(\"room\",\"==\",room), \n      orderBy(\"createdAt\")\n    );\n      const unsubscribe =  onSnapshot(queryMessages, (snapshot) => {\n        let messages = [];\n              snapshot.forEach((doc) => {\n              messages.push({...doc.data(), id: doc.id});\n              });\n        setMessages(messages);\n      });\n      return () => unsubscribe();\n   }, []);\n\n  const handleSubmit = async (e) =>{\n  e.preventDefault();\n  if (newMessage === \"\") return;\n\n  await addDoc(messagesRef, {\n    text: newMessage,\n    createdAt: serverTimestamp(),\n    utilisateur: auth.currentUser ? auth.currentUser.displayName : \"Utilisateur inconnu\",\n    photo: auth.currentUser.photoURL,\n    email: auth.currentUser.email,\n    room,\n  });\n\n  setNewMessage(\"\");\n};\n\nreturn (\n    <div className=\"chat-app\">\n      <div className=\"header\">\n        <h1>Bienvenue dans le salon {room.toUpperCase()}</h1>\n      </div>\n      <div className=\"messages\"> \n        {messages.map((message) => (\n          message.email === auth.currentUser.email ? (\n            <div className=\"message-soi\" key={message.id}>\n              <div className=\"message-texte\">\n               \n                <div className=\"message-contenu\">{message.text}</div>\n              </div>\n            \n            </div>\n          ) : (\n            <div className=\"message-autre\" key={message.id}>\n              <img className=\"photo-utilisateur\" src={message.photo} alt=\"Photo utilisateur\"></img>\n              <div className=\"message-texte\">\n                <div className=\"nom-utilisateur\">{message.utilisateur}</div>\n                <div className=\"message-contenu\">{message.text}</div>\n              </div>\n            </div>\n          )\n        ))}\n      </div>\n      <form onSubmit={handleSubmit} className=\"new-message-form\">\n        <input \n          className=\"new-message-input\" \n          placeholder=\"Ã‰crire un message ici...\"\n          onChange={(e) => setNewMessage(e.target.value)}\n          value={newMessage}\n        />\n        <button type=\"submit\" className=\"send-button\">\n          Envoyer\n        </button>\n      </form>\n    </div>\n  );}  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}